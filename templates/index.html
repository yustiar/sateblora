{% load static %}

<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Satu Datane Blora</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/dcedc4eee7.js" crossorigin="anonymous"></script>
        
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css" rel="stylesheet">
    
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">

      <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}">

</head>
<body>

<div>
     <div class="wave"></div>
     <div class="wave"></div>
     <div class="wave"></div>
  </div>

<!--### LOADING CIRCLE ###-->
<div class="output">
    <div class="container ">
        <div class="row d-flex justify-content-center">
            <div class="col-md-10">

                <div class="splash d-flex justify-content-center" >
                    <img class="img-fluid img-responsive rounded py-4 textsplash" src="" style="max-height:400px; margin-top: 100px;" loading="lazy">
                    <img class="img-fluid img-responsive rounded py-4 textsplash2" src="" style="max-height:100px; margin-top: 300px;" loading="lazy">
                </div>
            </div> 
        </div>
    </div>
</div> 
<div class="output">
    <div class="container ">
        <div class="row d-flex justify-content-center">
            <div class="col-md-10">
                <div class="ajaxProgess">
                    <div class="loadingicon">
                        <img src="{% static "gif/loading.gif" %}">
                    </div>
                </div>
            </div> 
        </div>
    </div>
</div>  


<!-- MODAL -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-lightwarning d-flex justify-content-center align-items-center">
                <h6 class="modal-title fw-bold text-center" id="exampleModalLabel">Indeks Pembangunan Gender Kabupaten Blora</h6>
            </div>
            <div class="modal-body">
                <div id="modalPicture" class="d-flex justify-content-center">   
                    <img class="img-fluid img-responsive rounded pb-2" id="modalimage" src="" style="max-height:1000px;" loading="lazy">     
                </div>
                    
                <p id="exampleModalContent" class="text-justify overflow-auto mb-0"></p> 
            </div>
            <div class="modal-footer">
                <div class="container">
                    <div class="row d-flex justify-content-center">
                        <div class="col">
                            <a role="button" class="btn btn-sm btn-warning fw-bold w-100" id="exampleModalButton" href="#">Unduh</a>
                        </div>
                        <div class="col">
                           <button type="button" class="btn btn-sm btn-dark fw-bold w-100" data-bs-dismiss="modal">Tutup</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- HEADER -->
<nav class="navbar sticky-top navbar-light bg-dark">
    <div class="container">
        <div class="row py-1 px-3">
            <div class="col p-0">
                <a href="#" class="text-decoration-none">
                    <div class="card-body container d-flex p-0">
                        <div class="card-indicator-icon me-2">
                            <img src="{% static "img/logoonly.png" %}" style="height:50px" />
                        </div>
                        <div class="card-indicator-text">
                            <div class="text-light"><h5 class="m-0 fw-bolder">Satu Datane Blora</h5></div>
                            <p class="m-0 text-darkwarning" id="header">Beranda</p>
                        </div>
                    </div>
                </a>
            </div>
        </div>

        <div class="row">
            <div class="dropdown-center ">
                <button class="btn btn-secondary btn-dark" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-question-circle" style="font-size: 20px; color: white;"></i>
                </button>
                <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start">
                    <li><a class="dropdown-item tentangbutton" href="#" data-bs-toggle="modal" data-bs-target="#exampleModal">Tentang Aplikasi</a></li>
                </ul>
            </div>
        </div>
    </div>       
</nav>

<!-- CONTENT CONTAINER -->
<div class="container-fluid pt-3 pb-3"> 
    <div class="tab-content pb-5" id="pills-tabContent">
        <div class="tab-pane fade show active" id="pills-beranda" role="tabpanel" aria-labelledby="pills-beranda-tab">
            <div class="container mb-2">
                <div class="d-flex justify-content-center row">
                    <div class="col-md-8 py-2">
                        <div class="card border-0">
                            <div class="card-header bg-lightwarning">
                                <div class="d-flex justify-content-between">
                                    <div class="d-flex flex-row align-items-center">
                                        <div class="icon-header bg-darkwarning"> <i class="bx bxs-slideshow bx-tada"></i> </div>
                                        <div class="ms-2 c-details">
                                            <h3 class="mb-0 fw-bold">Galeri Infografis</h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body container overflow-auto" style="max-height: 500px;">
                                <div class="row row_infografis p-2 align-items-center d-flex justify-content-center">
                                    <!-- Cols with responsive classes -->
                                    {% for i,j,k in infografis_all  %}
                                        <div class="col-4 col-md-4 col-lg-2 p-1 position-relative post-box-infografis">
                                            <div class="position-relative card-infografis" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                                
                                                <img src="{{j}}" class="img-thumbnail" alt="..." data-url="{{k}}" loading="lazy">
                                                <span class="btn btn-white judul-infografis btn-sm mb-1 position-absolute bottom-0 start-50 translate-middle-x w-100" type="button" style="line-height: 1.3;">
                                                    <p class="m-0" style="font-size: 0.8em;">{{i}}</p></span>
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>

                                <div class="row d-flex justify-content-center align-items-center p-2 mb-2">
                                    <button class="btn btn-sm btn-warning fw-bold w-50" type="submit" id="load_infografis">Muat lebih banyak..</button>
                                </div>
                            </div>
                        </div>
                    </div>




                    <div class="col-md-8 py-2">
                        <div class="card border-0">
                            <div class="card-header bg-lightwarning">
                                <div class="d-flex justify-content-between">
                                    <div class="d-flex flex-row align-items-center">
                                        <div class="icon-header bg-darkwarning"> <i class='bx bx-bar-chart-square bx-tada'></i> </div>
                                        <div class="ms-2 c-details">
                                            <h3 class="mb-0 fw-bold">Indikator Strategis</h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            {% for i,j,k,l,m,n in indikator_all %}
                            <a tabindex="0" role="button" data-bs-toggle="popover" data-bs-trigger="focus" data-bs-html="true" data-bs-content="{{n}}" data-bs-placement="top" style="font-size: small;">
                                <div class="card-body px-2 py-1 d-flex border-bottom border-secondary">
                                    <div class="card-indicator-icon pe-3">
                                        <img src="{{m}}" style="height:70px" loading="lazy"/>
                                    </div>
                                    <div class="card-indicator-text">
                                        <div class="card-indicator-title m-0 h6 fw-bold text-secondary">
                                            {{i}}, {{j}}
                                        </div>
                                        <div class="indicator-value">
                                            <h3 class="m-0 fw-bolder">{{k}}</h3><p class="m-0"><small>{{l}}</small></p>
                                        </div>
                                    </div>
                                </div>
                            </a>
                            {% endfor %}
                        </div>
                    </div>
                        
                    
                    <div class="col-md-8 py-2">
                        <div class="card border-0 border-light">
                            <div class="card-header bg-lightwarning">
                                <div class="d-flex justify-content-between">
                                    <div class="d-flex flex-row align-items-center">
                                        <div class="icon-header bg-darkwarning"> <i class="bx bx-desktop bx-tada"></i> </div>
                                        <div class="ms-2 c-details">
                                            <h3 class="mb-0 fw-bold">Sosial Media</h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-0 container">
                                <div class="row p-2 w-100 d-flex align-items-center justify-content-center ">
                                    <div class="col-6 col-md-4 col-lg-2 p-1">
                                        <a href="https://www.instagram.com/bpskabblora/">
                                            <div class="social-icon p-1">
                                                <img src="https://img.icons8.com/fluency/48/000000/instagram-new.png" alt="Instagram">
                                                <p>Instagram</p>
                                            </div>    
                                        </a>
                                        
                                    </div>
                                    <div class="col-6 col-md-4 col-lg-2 p-1">
                                        <a href="https://www.youtube.com/@bpskabblora">
                                            <div class="social-icon p-1">
                                                <img src="https://img.icons8.com/color/48/000000/youtube-play.png" alt="YouTube">
                                                <p>YouTube</p>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-6 col-md-4 col-lg-2 p-1">
                                        <a href="https://www.facebook.com/bpskabblora/">
                                            <div class="social-icon p-1">
                                                <img src="https://img.icons8.com/fluency/48/000000/facebook-new.png" alt="Facebook">
                                                <p>Facebook</p>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-6 col-md-4 col-lg-2 p-1">
                                        <a href="https://www.tiktok.com/@bpskabblora/">
                                            <div class="social-icon p-1">
                                                <img src="https://img.icons8.com/fluency/48/000000/tiktok.png" alt="TikTok">
                                                <p>TikTok</p>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-6 col-md-4 col-lg-2 p-1">
                                        <a href="https://x.com/bpskabblora">
                                            <div class="social-icon p-1">
                                                <img src="https://img.icons8.com/ios-filled/50/twitterx--v1.png" alt="X">
                                                <p>X</p>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>    
                    </div>  
                    <div class="col-md-8 py-2">
                        <div class="card border-0 border-light">
                            <div class="card-header bg-lightwarning">
                                <div class="d-flex justify-content-between">
                                    <div class="d-flex flex-row align-items-center">
                                        <div class="icon-header bg-darkwarning"> <i class="bx bxl-dribbble bx-tada"></i> </div>
                                        <div class="ms-2 c-details">
                                            <h3 class="mb-0 fw-bold">Situs Web</h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-0 container">
                                <div class="row p-2 w-100 d-flex align-items-center justify-content-center ">
                                    <div class="col-6 col-md-4 col-lg-2 p-1">
                                        <a href="https://www.blorakab.bps.go.id">
                                            <div class="social-icon p-1">
                                                <img src="https://imgur.com/DqZOLUE.png" alt="website">
                                                <p>BPS kabupaten Blora</p>
                                            </div>    
                                        </a>
                                    </div>
                                    <div class="col-6 col-md-4 col-lg-2 p-1">
                                        <a href="https://www.jateng.bps.go.id">
                                            <div class="social-icon p-1">
                                                <img src="https://imgur.com/DqZOLUE.png" alt="website">
                                                <p>BPS Provinsi Jawa Tengah</p>
                                            </div>    
                                        </a>
                                    </div>
                                    <div class="col-6 col-md-4 col-lg-2 p-1">
                                        <a href="https://www.bps.go.id">
                                            <div class="social-icon p-1">
                                                <img src="https://imgur.com/DqZOLUE.png" alt="website">
                                                <p>BPS RI</p>
                                            </div>    
                                        </a>
                                    </div>
                                    
                                    <div class="col-6 col-md-4 col-lg-2 p-1">
                                        <a href="https://play.google.com/store/apps/details?id=id.go.bps.allstats&hl=id">
                                            <div class="social-icon p-1">
                                                <img src="https://imgur.com/BtBn4om.png" alt="allstat">
                                                <p>Allstat</p>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-6 col-md-4 col-lg-2 p-1">
                                        <a href="https://sensus.bps.go.id/">
                                            <div class="social-icon p-1">
                                                <img src="https://imgur.com/vDKiu03.png" alt="websensus">
                                                <p>Website Sensus</p>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-6 col-md-4 col-lg-2 p-1">
                                        <a href="https://klasifikasi.web.bps.go.id/">
                                            <div class="social-icon p-1">
                                                <img src="https://www.bps.go.id/assets/icons/kbli-kbki.svg" alt="kblikbki">
                                                <p>KBLI KBKI</p>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-6 col-md-4 col-lg-2 p-1">
                                        <a href="https://indah.bps.go.id/">
                                            <div class="social-icon p-1">
                                                <img src="https://www.bps.go.id/assets/icons/indah.svg" alt="indah">
                                                <p>Indah</p>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-6 col-md-4 col-lg-2 p-1">
                                        <a href="https://webapps.bps.go.id/blorakab/jatikuat/">
                                            <div class="social-icon p-1">
                                                <img src="https://imgur.com/lbAkUbz.png" alt="website">
                                                <p>Jatikuat</p>
                                            </div>    
                                        </a>
                                    </div>
                                    <div class="col-6 col-md-4 col-lg-2 p-1">
                                        <a href="https://satudata.blorakab.go.id/">
                                            <div class="social-icon p-1">
                                                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/Seal_of_Blora_Regency.svg/577px-Seal_of_Blora_Regency.svg.png" alt="indah">
                                                <p>Satu Data Blora</p>
                                            </div>
                                        </a>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>    
                    </div> 
                </div>
            </div>
        </div>
        



        <!--### PUBLIKASI ###-->
        <div class="tab-pane fade" id="pills-publikasi" role="tabpanel" aria-labelledby="pills-publikasi-tab">
            <div class="container mb-2">
                <div class="row d-flex justify-content-center">
                    <div class="col-md-10 d-flex py-3 px-0">
                        <input class="input_search_publikasi w-100 p-2 border border-warning" type="text" placeholder="Cari Publikasi disini...." name="search2">
                        <button type="submit" class="cari_publikasi btn btn-warning m-0 fw-bold">Cari</button>
                    </div>
                    <div class="row2 col-md-10">
                    </div>
                </div>

                <div class="row d-flex justify-content-center">
                    <div class="col-md-10 d-flex align-items-center justify-content-center py-3 px-0">
                        <button class="btn btn-sm btn-warning w-50 pe-auto fw-bold" type="submit" id="load_pub">Muat lebih banyak..</button>
                    </div>
                    

                </div>       
            </div>
        </div>  
            
        <!--### DATA ###
        <div class="tab-pane fade" id="pills-data" role="tabpanel" aria-labelledby="pills-data-tab">
            <div class="container">
                <div class="row d-flex justify-content-center border border-black bg-dark">
                    <p class="text-white text-center m-1">Menu ini berisi data data yang dihasilkan oleh BPS yang disajikan dalam bentuk tabel</p>
                </div>
                <div class="row row4 d-flex justify-content-center">
                    <div class="container m-0 p-0">
                        <div class="mt-3 mb-2 bordertopblue borderbotblue">
                            <button type="button" class="btn bg-white shadow-none border border-primary border-1 text-left w-100 m-0 p-2 font-weight-bold subject_0 fw-bold" data-bs-toggle="collapse" data-bs-target="#subject_0">
                                <i class="fas fa-users pr-2 bps-blue"></i>
                                Sosial & Kependudukan
                            </button>
                        </div>
                        <div class="mb-2 bordertoporange borderbotorange">
                            <button type="button" class="btn bg-white shadow-none border border-warning border-1 text-left w-100 m-0 p-2 font-weight-bold subject_1 fw-bold" data-bs-toggle="collapse" data-bs-target="#subject_1">
                                <i class="fas fa-money-bill-wave pr-2 bps-orange"></i>
                                Ekonomi & Perdagangan
                            </button>
                        </div>
                        <div class="mb-2 bordertopgreen borderbotgreen">
                            <button type="button" class="btn bg-white shadow-none border border-success border-1 text-left w-100 m-0 p-2 font-weight-bold subject_2 fw-bold" data-bs-toggle="collapse" data-bs-target="#subject_2">
                                <i class="fas fa-leaf pr-2 bps-green"></i>
                                Pertanian & Pertambangan
                            </button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        -->
        <!--### BRS ###-->
        <div class="tab-pane fade" id="pills-brs" role="tabpanel" aria-labelledby="pills-brs-tab">
            <div class="container mb-2">
                <div class="row d-flex justify-content-center">
                    <div class="col-md-10 d-flex px-0 py-3">
                        <input class="input_search_brs w-100 p-2 border border-warning" type="text" placeholder="Cari BRS disini...." name="search2">
                        <button type="submit" class="cari_brs btn btn-warning m-0 fw-bold">Cari</button>
                    </div>

                    <div class="row_brs col-md-10">
                    </div>
                </div>
                <div class="row d-flex justify-content-center">
                    <div class="col-md-10 d-flex align-items-center justify-content-center py-3 px-0">
                        <button class="btn btn-sm btn-warning w-50 pe-auto fw-bold" type="submit" id="load_brs">Muat lebih banyak..</button>
                    </div>
                </div>          
            </div>
        </div>

        <!--### BERITA ###-->
        <div class="tab-pane fade" id="pills-berita" role="tabpanel" aria-labelledby="pills-berita-tab">
            <div class="container mb-2">
                <div class="row d-flex justify-content-center">

                    <div class="col-md-10 d-flex px-0 py-3">
                        <input class="input_search_berita w-100 p-2 border border-warning" type="text" placeholder="Cari Berita disini...." name="search2">
                        <button type="submit" class="cari_berita btn btn-warning m-0 fw-bold">Cari</button>
                    </div>

                    <div class="row_berita col-md-10">
                    </div>
                </div>

                <div class="row d-flex justify-content-center">
                    <div class="col-md-10 d-flex align-items-center justify-content-center py-3 px-0">
                        <button class="btn btn-sm btn-warning w-50 pe-auto fw-bold" type="submit" id="load_berita">Muat lebih banyak..</button>
                    </div>
                </div> 
            </div>
        </div>
    </div>
</div>


<!-- BOTTOM NAV -->
<ul class="nav nav-pills fixed-bottom nav-justified w-100 bg-dark " id="pills-tab" role="tablist">
    <li class="tab nav-item tabberanda active bg-dark" role="presentation">
        <a class="nav-link active p-1" id="pills-beranda-tab" data-bs-toggle="pill" data-bs-target="#pills-beranda" type="button" role="tab" aria-controls="pills-beranda" aria-selected="true">
            <i class="fas fa-home"></i>
            <p class="m-0 fw-bold">Beranda</p>
        </a>
    </li>
    <li class="tab nav-item bg-dark" role="presentation">
        <a class="nav-link p-1" id="pills-publikasi-tab" data-bs-toggle="pill" data-bs-target="#pills-publikasi" type="button" role="tab" aria-controls="pills-publikasi" aria-selected="false">
            <i class="fas fa-book-open"></i>
            <p class="m-0 fw-bold">Publikasi</p>
        </a>
    </li>
    <!--
    <li class="tab nav-item bg-dark" role="presentation">
        <a class="nav-link p-1" id="pills-data-tab" data-bs-toggle="pill" data-bs-target="#pills-data" type="button" role="tab" aria-controls="pills-data" aria-selected="false">
            <i class="fas fa-database"></i>
            <p class="m-0 fw-bold">Data</p>
        </a>
    </li>
    -->
    <li class="tab nav-item bg-dark" role="presentation">
        <a class="nav-link p-1" id="pills-brs-tab" data-bs-toggle="pill" data-bs-target="#pills-brs" type="button" role="tab" aria-controls="pills-brs" aria-selected="false">
            <i class="fas fa-file-alt"></i>
            <p class="m-0 fw-bold">BRS</p>
        </a>
    </li>
    <li class="tab nav-item bg-dark" role="presentation">
        <a class="nav-link p-1" id="pills-berita-tab" data-bs-toggle="pill" data-bs-target="#pills-berita" type="button" role="tab" aria-controls="pills-berita" aria-selected="false">
            <i class="fas fa-newspaper"></i>
            <p class="m-0 fw-bold">Berita</p>
        </a>
    </li>
</ul>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>



<script type="text/javascript">
    const tabs = document.querySelectorAll('.nav-item');

    tabs.forEach(clickedTab => {
        clickedTab.addEventListener('click', () => {
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            clickedTab.classList.add('active'); 
        });
    });
       
    
    var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
        var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
            return new bootstrap.Popover(popoverTriggerEl)
    }); 




$(document).ready(function(){
    $(".splash").show();

    $(".textsplash").attr("src","https://imgur.com/FqS4A7E.png");
    $(".textsplash").attr("loading","lazy");
    $(".textsplash").hide().fadeIn(1500);
    $(".textsplash").delay(2000)
    $(".textsplash").fadeOut(1000);

    $(".textsplash2").delay(4500)
    $(".textsplash2").attr("src","https://imgur.com/q68ZVPW.png");
    $(".textsplash2").attr("loading","lazy");
    $(".textsplash2").hide().fadeIn(1000);
    $(".textsplash2").delay(2000)
    $(".textsplash2").fadeOut(500);

    $(".splash").delay(8000).fadeOut(1000);
    $(".splash").fadeOut(1000, function(){
        $(this).remove();
    });

    document.addEventListener('DOMContentLoaded', function () {
        var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));
        var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
            return new bootstrap.Popover(popoverTriggerEl);
        });
    });
////BERANDA////
    $("#pills-beranda-tab").on('click',function(){
        $('#header').text('Beranda');
    });

    //DETAIL INFOGRAFIS
    $('body').on('click', 'div.card-infografis', function (){
        $("#modalimage").removeClass("w-25");
        $("#modalimage").removeClass("w-50");
        $("#modalimage").removeClass("w-100");
        $("#modalimage").addClass("w-100");

        $("#exampleModalLabel").text($(this).find('p').text());
        $("#exampleModalContent").text("");
        $("#modalimage").attr("src",$(this).find('img').attr('src'));
        $("#exampleModalButton").show();
        $("#exampleModalButton").attr("href", $(this).find('img').attr('data-url'));
    });

    //LOAD MORE INFOGRAFIS
    $("#load_infografis").on('click',function(){
        $(".ajaxProgess").show();
        var _currentResult=$(".post-box-infografis").length;
        console.log(_currentResult);
        $.ajax({
            url:"{% url 'load_more_infografis' %}",
            type:'post',
            data:{
                'offset':_currentResult,
                'csrfmiddlewaretoken':"{{csrf_token}}"
            },
            dataType:'json',
            beforeSend:function(){
                $("#load_infografis").addClass('disabled').text('Loading..');
            },
            success:function(res){
                $(".ajaxProgess").hide();
                var _html='';
                var json_data=res.posts;
                console.log(json_data);
                var indd = $(".post-box-infografis").length;
                $.each(json_data,function(index,data){
                    _html+=
                        '<div class="col-4 col-md-4 col-lg-2 p-1 position-relative post-box-infografis">'+
                            '<div class="position-relative card-infografis" data-bs-toggle="modal" data-bs-target="#exampleModal">'+
                                
                                '<img src="'+data.img+'" class="img-thumbnail" alt="..." data-url="'+data.dl+'" loading="lazy">'+
                                '<span class="btn btn-white judul-infografis btn-sm mb-1 position-absolute bottom-0 start-50 translate-middle-x w-100" type="button" style="line-height: 1.3;">'+
                                    '<p class="m-0" style="font-size: 0.8em;">'+data.title+'</p></span>'+
                                
                                
                            '</div>'+
                        '</div>'

                        ;
                   });
                $(".row_infografis").append(_html);
                var _countTotal=$(".post-box-infografis").length;
                
                if(_countTotal==res.totalResult){
                    $("#load_infografis").remove();
                }else{
                    $("#load_infografis").removeClass('disabled').text('Muat lebih banyak..');
                }
            }
        });
    });
    

////PUBLIKASI////
    //INIT
    $("#pills-publikasi-tab").on('click',function(){
        $('#header').text('Publikasi');
        if($(".post-box-pub").length<1){
            $('input:text').val('');
            $(".ajaxProgess").show();
            $(window).scrollTop(0);
            $("#load_pub").show();
            $("#load_pub").removeClass('disabled').text('Muat lebih banyak..');
            $.ajax({
                url:"{% url 'load_init_pub' %}",
                type:'post',
                data:{
                    'csrfmiddlewaretoken':"{{csrf_token}}"
                },
                dataType:'json',
                success:function(res){
                    $(".ajaxProgess").hide();
                    var _html='<p class="py-2 text-white text-center fw-bold">--- Menemukan '+res.totalitem.total+' publikasi ---</p>';
                   
                    var json_data=res.posts;
                    $.each(json_data,function(index,data){
                        _html+=
                        '<div class="row mb-2 border border-secondary post-box-pub" id="'+data.pub_id+'" >'+
                            
                            '<div class="coverpub col-md-3 py-3 d-flex justify-content-center">'+
                                '<img class="img-fluid img-responsive rounded shadow rounded" src="'+data.cover+'" style="max-width:120px;" loading="lazy">'+
                            '</div>'+
                            '<div class="col-md-6 infopub">'+
                                '<p class="h5 pl-1 pt-2 text-center text-dark fw-bold">'+data.title+'</p>'+
                                '<div class="container ml-1 py-2">'+
                                    '<div class="row d-flex flex-row">'+
                                        '<div class="text-muted pt-0 m-0" style="font-size: 0.8rem; line-height: 1.2;">'+
                                            '<p class="mb-0"><i class="fas fa-caret-right"></i>'+
                                            '<small> Ukuran : '+data.size+'</small></p>'+
                                            '<p><i class="fas fa-caret-right"></i>'+
                                            '<small> Tanggal Rilis : '+data.rl_date+'</small></p>'+
                                        '</div>'+
                                    '</div>'+
                                '</div>'+
                            '</div>'+
                            '<div class="bg-white align-items-center col-md-3 py-2 shadow-sm" >'+
                                '<div class="d-flex flex-column">'+
                                    '<button class="btn btn-white border-warning detailpub btn-sm rounded-pill shadow-none mb-2" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal">Detail</button>'+
                                    '<a class="btn btn-warning text-dark btn-sm mt-0 mb-2 rounded-pill shadow-none" role="button" href="'+data.pdf+'">Unduh</a>'+
                                '</div>'+
                            '</div>'+
                        '</div>'
                        ;
                       });
                    $(".row2").html(_html);
                }
            });
        }
    });
    //LOAD MORE PUBLIKASI
    $("#load_pub").on('click',function(){
        $(".ajaxProgess").show();
        var _currentResult=$(".post-box-pub").length;
        $.ajax({
            url:"{% url 'load_more_pub' %}",
            type:'post',
            data:{
                'offset':_currentResult,
                'csrfmiddlewaretoken':"{{csrf_token}}"
            },
            dataType:'json',
            beforeSend:function(){
                $("#load_pub").addClass('disabled').text('Loading..');
            },
            success:function(res){
                $(".ajaxProgess").hide();
                var _html='';
                var json_data=res.posts;
                var indd = $(".post-box-pub").length;
                $.each(json_data,function(index,data){
                    _html+=
                        '<div class="row mb-2 border border-secondary post-box-pub" id="'+data.pub_id+'" >'+
                            
                            '<div class="coverpub col-md-3 py-3 d-flex justify-content-center">'+
                                '<img class="img-fluid img-responsive rounded shadow rounded" src="'+data.cover+'" style="max-width:120px;" loading="lazy">'+
                            '</div>'+
                            '<div class="col-md-6 infopub">'+
                                '<p class="h5 pl-1 pt-2 text-center text-dark fw-bold">'+data.title+'</p>'+
                                '<div class="container ml-1 py-2">'+
                                    '<div class="row d-flex flex-row">'+
                                        '<div class="text-muted pt-0 m-0" style="font-size: 0.8rem; line-height: 1.2;">'+
                                            '<p class="mb-0"><i class="fas fa-caret-right"></i>'+
                                            '<small> Ukuran : '+data.size+'</small></p>'+
                                            '<p><i class="fas fa-caret-right"></i>'+
                                            '<small> Tanggal Rilis : '+data.rl_date+'</small></p>'+
                                        '</div>'+
                                    '</div>'+
                                '</div>'+
                            '</div>'+
                            '<div class="bg-white align-items-center col-md-3 py-2 shadow-sm" >'+
                                '<div class="d-flex flex-column">'+
                                    '<button class="btn btn-white border-warning detailpub btn-sm rounded-pill shadow-none mb-2" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal">Detail</button>'+
                                    '<a class="btn btn-warning text-dark btn-sm mt-0 mb-2 rounded-pill shadow-none" role="button" href="'+data.pdf+'">Unduh</a>'+
                                '</div>'+
                            '</div>'+
                        '</div>'
                        ;
                   });
                $(".row2").append(_html);
                var _countTotal=$(".post-box-pub").length;
                
                if(_countTotal==res.totalResult){
                    $("#load_pub").remove();
                }else{
                    $("#load_pub").removeClass('disabled').text('Muat lebih banyak..');
                }
            }
        });
    });


    //DETAIL PUBLIKASI
    $('body').on('click', 'button.detailpub', function (){
        $(".ajaxProgess").show();
        $("#exampleModalLabel").text("memuat....");
        $("#exampleModalContent").text("memuat....");
        $("#modalimage").attr("src","");
        var _currentResult=$(this).parent().parent().parent().attr('id');
        $.ajax({
            url:"{% url 'detail_pub' %}",
            type:'post',
            data:{
                'csrfmiddlewaretoken':"{{csrf_token}}", 
                'offset':_currentResult,
            },
            dataType:'json',
            success:function(res){
                var _html='';
                var json_data=res.posts;
                $("#modalimage").removeClass("w-25");
                $("#modalimage").removeClass("w-50");
                $("#modalimage").removeClass("w-100");
                $("#modalimage").addClass("w-50");
                
                $("#exampleModalLabel").text(json_data.title);
                $("#exampleModalContent").html(json_data.abstract);
                $("#modalimage").attr("src",json_data.cover);
                $("#exampleModalButton").show();
                $("#exampleModalButton").attr("href", json_data.pdf)
                $(".ajaxProgess").hide();
            }
        });
    });

    //CARI PUBLIKASI
    $('body').on('click', 'button.cari_publikasi', function (){
        $(".ajaxProgess").show();
        var _currentResult=$('.input_search_publikasi').val();
        $.ajax({
            url:"{% url 'cari_pub' %}",
            type:'post',
            data:{
                'csrfmiddlewaretoken':"{{csrf_token}}", 
                'offset':_currentResult,
            },
            dataType:'json',
            success:function(res){
                $(".ajaxProgess").hide();
                var _html='<p class="py-2 text-white text-center fw-bold">--- Menemukan '+res.posts.length+' publikasi ---</p>';
                var json_data=res.posts;
                if(_currentResult.length > 1){
                    if(json_data.length > 0){
                        $.each(json_data,function(index,data){
                            _html+=
                            '<div class="row mb-2 border border-secondary post-box-pub" id="'+data.pub_id+'" >'+
                            
                            '<div class="coverpub col-md-3 py-3 d-flex justify-content-center">'+
                                '<img class="img-fluid img-responsive rounded shadow rounded" src="'+data.cover+'" style="max-width:120px;" loading="lazy">'+
                            '</div>'+
                            '<div class="col-md-6 infopub">'+
                                '<p class="h5 pl-1 pt-2 text-center text-dark fw-bold">'+data.title+'</p>'+
                                '<div class="container ml-1 py-2">'+
                                    '<div class="row d-flex flex-row">'+
                                        '<div class="text-muted pt-0 m-0" style="font-size: 0.8rem; line-height: 1.2;">'+
                                            '<p class="mb-0"><i class="fas fa-caret-right"></i>'+
                                            '<small> Ukuran : '+data.size+'</small></p>'+
                                            '<p><i class="fas fa-caret-right"></i>'+
                                            '<small> Tanggal Rilis : '+data.rl_date+'</small></p>'+
                                        '</div>'+
                                    '</div>'+
                                '</div>'+
                            '</div>'+
                            '<div class="bg-white align-items-center col-md-3 py-2 shadow-sm" >'+
                                '<div class="d-flex flex-column">'+
                                    '<button class="btn btn-white border-warning detailpub btn-sm rounded-pill shadow-none mb-2" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal">Detail</button>'+
                                    '<a class="btn btn-warning text-dark btn-sm mt-0 mb-2 rounded-pill shadow-none" role="button" href="'+data.pdf+'">Unduh</a>'+
                                '</div>'+
                            '</div>'+
                        '</div>'
                            ;
                           });
                        _html += '<div class="row d-flex justify-content-center"><button class="btn btn-warning text-dark w-50 fw-bold" type="submit" id="back_to_init_pub">Kembali ke hasil awal</button></div>' 
                        $(".row2").html(_html);
                        $("#load_pub").hide();

                    }else if(json_data.length == 0){
                        _html = '<p class="text-white text-center">Publikasi dengan kata kunci "'+_currentResult+'" tidak ditemukan</p>'+
                        '<div class="row d-flex justify-content-center"><button class="btn btn-warning text-dark w-50 fw-bold" type="submit" id="back_to_init_pub">Kembali ke hasil awal</button></div>'   
                        $(".row2").html(_html);

                        $("#load_pub").hide();

                    }
                }
                $("#back_to_init_pub").on('click',function(){
                    $(".row2").html('</br>>');
                    $("#pills-publikasi-tab").click();

                });
                    
                
            }
        });
    });



////BRS////
    //INIT
    $("#pills-brs-tab").on('click',function(){
        $('#header').text('Berita Resmi Statistik (BRS)');
        if($(".post-box-brs").length<1){
            $('input:text').val('');
            $(".ajaxProgess").show();
            $(window).scrollTop(0);
            $("#load_brs").show();
            $("#load_brs").removeClass('disabled').text('Muat lebih banyak..');
            $.ajax({
                url:"{% url 'load_init_brs' %}",
                type:'post',
                data:{
                    'csrfmiddlewaretoken':"{{csrf_token}}"
                },
                dataType:'json',
                success:function(res){
                    $(".ajaxProgess").hide();
                    var _html='<p class="py-2 text-white text-center fw-bold">--- Menemukan '+res.totalitem.total+' Berita Resmi Statistik ---</p>';
                    
                    var json_data=res.posts;
                    $.each(json_data,function(index,data){
                        _html+=
                        '<div class="row mb-2 border border-secondary post-box-brs" id="'+data.brs_id+'" >'+
                            
                            '<div class="bg-lightwarning col-md-3 py-3 d-flex justify-content-center">'+
                                '<img class="img-fluid img-responsive rounded shadow rounded" src="https://i.imgur.com/cSOFqIp.png" style="max-width:120px;" loading="lazy">'+
                            '</div>'+
                            '<div class="col-md-6 bg-lightwarning">'+
                                '<p class="h5 pl-1 pt-2 text-center text-dark fw-bold">'+data.title+'</p>'+
                                '<div class="container ml-1 py-2">'+
                                    '<div class="row d-flex flex-row">'+
                                        '<div class="text-muted pt-0 m-0" style="font-size: 0.8rem; line-height: 1.2;">'+
                                            '<p class="mb-0"><i class="fas fa-caret-right"></i>'+
                                            '<small> Kategori : '+data.subj+'</small></p>'+
                                            '<p class="mb-0"><i class="fas fa-caret-right"></i>'+
                                            '<small> Ukuran : '+data.size+'</small></p>'+
                                            '<p><i class="fas fa-caret-right"></i>'+
                                            '<small> Tanggal Rilis : '+data.rl_date+'</small></p>'+
                                        '</div>'+
                                    '</div>'+
                                '</div>'+
                            '</div>'+
                            '<div class="bg-white align-items-center col-md-3 py-2 shadow-sm" >'+
                                '<div class="d-flex flex-column">'+
                                    '<button class="btn btn-white border-warning detailbrs btn-sm rounded-pill shadow-none mb-2" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal">Detail</button>'+
                                    '<a class="btn btn-warning text-dark btn-sm mt-0 mb-2 rounded-pill shadow-none" role="button" href="'+data.pdf+'">Unduh</a>'+
                                '</div>'+
                            '</div>'+
                        '</div>'
                        ;
                       });
                    $(".row_brs").html(_html);
                }
            });
        }
    });

    //LOAD MORE BRS
    $("#load_brs").on('click',function(){
        $(".ajaxProgess").show();
        var _currentResult=$(".post-box-brs").length;
        $.ajax({
            url:"{% url 'load_more_brs' %}",
            type:'post',
            data:{
                'offset':_currentResult,
                'csrfmiddlewaretoken':"{{csrf_token}}"
            },
            dataType:'json',
            beforeSend:function(){
                $("#load_brs").addClass('disabled').text('Loading..');
            },
            success:function(res){
                $(".ajaxProgess").hide();
                var _html='';
                var json_data=res.posts;
                console.log(json_data);
                var indd = $(".post-box-brs").length;
                $.each(json_data,function(index,data){
                    _html+=
                        '<div class="row mb-2 border border-secondary post-box-brs" id="'+data.brs_id+'" >'+
                            
                            '<div class="bg-lightwarning col-md-3 py-3 d-flex justify-content-center">'+
                                '<img class="img-fluid img-responsive rounded shadow rounded" src="https://i.imgur.com/cSOFqIp.png" style="max-width:120px;" loading="lazy">'+
                            '</div>'+
                            '<div class="col-md-6 bg-lightwarning">'+
                                '<p class="h5 pl-1 pt-2 text-center text-dark fw-bold">'+data.title+'</p>'+
                                '<div class="container ml-1 py-2">'+
                                    '<div class="row d-flex flex-row">'+
                                        '<div class="text-muted pt-0 m-0" style="font-size: 0.8rem; line-height: 1.2;">'+
                                            '<p class="mb-0"><i class="fas fa-caret-right"></i>'+
                                            '<small> Kategori : '+data.subj+'</small></p>'+
                                            '<p class="mb-0"><i class="fas fa-caret-right"></i>'+
                                            '<small> Ukuran : '+data.size+'</small></p>'+
                                            '<p><i class="fas fa-caret-right"></i>'+
                                            '<small> Tanggal Rilis : '+data.rl_date+'</small></p>'+
                                        '</div>'+
                                    '</div>'+
                                '</div>'+
                            '</div>'+
                            '<div class="bg-white align-items-center col-md-3 py-2 shadow-sm" >'+
                                '<div class="d-flex flex-column">'+
                                    '<button class="btn btn-white border-warning detailbrs btn-sm rounded-pill shadow-none mb-2" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal">Detail</button>'+
                                    '<a class="btn btn-warning text-dark btn-sm mt-0 mb-2 rounded-pill shadow-none" role="button" href="'+data.pdf+'">Unduh</a>'+
                                '</div>'+
                            '</div>'+
                        '</div>'
                        ;
                   });
                $(".row_brs").append(_html);
                var _countTotal=$(".post-box-brs").length;
                
                if(_countTotal==res.totalResult){
                    $("#load_brs").remove();
                }else{
                    $("#load_brs").removeClass('disabled').text('Muat lebih banyak..');
                }
            }
        });
    });

    //DETAIL BRS
    $('body').on('click', 'button.detailbrs', function (){
        $(".ajaxProgess").show();
        $("#exampleModalLabel").text("memuat....");
        $("#exampleModalContent").text("memuat....");
        $("#modalimage").attr("src","");
        var _currentResult=$(this).parent().parent().parent().attr('id');
        $.ajax({
            url:"{% url 'detail_brs' %}",
            type:'post',
            data:{
                'csrfmiddlewaretoken':"{{csrf_token}}", 
                'offset':_currentResult,
            },
            dataType:'json',
            success:function(res){
                var _html='';
                var json_data=res.posts;
                var tes=""
                if (json_data.abstract == ""){
                    tes = "detil BRS tidak tersedia";
                }else{
                    tes = json_data.abstract;
                }
                var txt = document.createElement("textarea");
                txt.innerHTML = tes;
                var output = txt.value;
                $("#modalimage").removeClass("w-25");
                $("#modalimage").removeClass("w-50");
                $("#modalimage").removeClass("w-100");
                $("#modalimage").addClass("w-25");
                
                $("#exampleModalLabel").text(json_data.title);
                $("#exampleModalContent").html(output);

                $("#modalimage").attr("src","https://i.imgur.com/cSOFqIp.png");
                $("#exampleModalButton").show();
                $("#exampleModalButton").attr("href", json_data.pdf)
                $(".ajaxProgess").hide();
            }
        });
    });

    //CARI BRS
    $('body').on('click', 'button.cari_brs', function (){
        $(".ajaxProgess").show();
        var _currentResult=$('.input_search_brs').val();
        $.ajax({
            url:"{% url 'cari_brs' %}",
            type:'post',
            data:{
                'csrfmiddlewaretoken':"{{csrf_token}}", 
                'offset':_currentResult,
            },
            dataType:'json',
            success:function(res){
                $(".ajaxProgess").hide();
                var _html='<p class="py-2 text-white text-center fw-bold">--- Menemukan '+res.posts.length+' Berita Resmi Statistik ---</p>';
                var json_data=res.posts;
                if(_currentResult.length > 1){
                    if(json_data.length > 0){
                        $.each(json_data,function(index,data){
                            _html+=
                            '<div class="row mb-2 border border-secondary post-box-brs" id="'+data.brs_id+'" >'+
                            
                            '<div class="bg-lightwarning col-md-3 py-3 d-flex justify-content-center">'+
                                '<img class="img-fluid img-responsive rounded shadow rounded" src="https://i.imgur.com/cSOFqIp.png" style="max-width:120px;" loading="lazy">'+
                            '</div>'+
                            '<div class="col-md-6 bg-lightwarning">'+
                                '<p class="h5 pl-1 pt-2 text-center text-dark fw-bold">'+data.title+'</p>'+
                                '<div class="container ml-1 py-2">'+
                                    '<div class="row d-flex flex-row">'+
                                        '<div class="text-muted pt-0 m-0" style="font-size: 0.8rem; line-height: 1.2;">'+
                                            '<p class="mb-0"><i class="fas fa-caret-right"></i>'+
                                            '<small> Kategori : '+data.subj+'</small></p>'+
                                            '<p class="mb-0"><i class="fas fa-caret-right"></i>'+
                                            '<small> Ukuran : '+data.size+'</small></p>'+
                                            '<p><i class="fas fa-caret-right"></i>'+
                                            '<small> Tanggal Rilis : '+data.rl_date+'</small></p>'+
                                        '</div>'+
                                    '</div>'+
                                '</div>'+
                            '</div>'+
                            '<div class="bg-white align-items-center col-md-3 py-2 shadow-sm" >'+
                                '<div class="d-flex flex-column">'+
                                    '<button class="btn btn-white border-warning detailbrs btn-sm rounded-pill shadow-none mb-2" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal">Detail</button>'+
                                    '<a class="btn btn-warning text-dark btn-sm mt-0 mb-2 rounded-pill shadow-none" role="button" href="'+data.pdf+'">Unduh</a>'+
                                '</div>'+
                            '</div>'+
                        '</div>'
                            ;
                           });
                        _html += '<div class="row d-flex justify-content-center"><button class="btn btn-warning text-dark w-50 fw-bold" type="submit" id="back_to_init_brs">Kembali ke hasil awal</button></div>' 
                        $(".row_brs").html(_html);
                        $("#load_brs").hide();

                    }else if(json_data.length == 0){
                        _html = '<p class="text-white text-center">BRS dengan kata kunci "'+_currentResult+'" tidak ditemukan</p>'+
                        '<div class="row d-flex justify-content-center"><button class="btn btn-warning text-dark w-50 fw-bold" type="submit" id="back_to_init_brs">Kembali ke hasil awal</button></div>'   
                        $(".row_brs").html(_html);

                        $("#load_brs").hide();

                    }
                }
                $("#back_to_init_brs").on('click',function(){
                    $(".row_brs").html('</br>>');
                    $("#pills-brs-tab").click();

                });
                    
                
            }
        });
    });




////BERITA////
    //INIT
    $("#pills-berita-tab").on('click',function(){
        $('#header').text('Berita');
        if($(".post-box-berita").length<1){
            $('input:text').val('');
            $(".ajaxProgess").show();
            $(window).scrollTop(0);
            $("#load_berita").show();
            $("#load_berita").removeClass('disabled').text('Muat lebih banyak..');
            $.ajax({
                url:"{% url 'load_init_berita' %}",
                type:'post',
                data:{
                    'csrfmiddlewaretoken':"{{csrf_token}}"
                },
                dataType:'json',
                success:function(res){
                    $(".ajaxProgess").hide();
                    var _html='<p class="py-2 text-white text-center fw-bold">--- Menemukan '+res.totalitem.total+' Berita ---</p>';
                    
                    var json_data=res.posts;
                    $.each(json_data,function(index,data){
                        _html+=
                        '<div class="row mb-2 border border-secondary post-box-berita" id="'+data.news_id+'" >'+
                            '<div class="bg-lightwarning col-md-3 py-3 d-flex justify-content-center">'+
                                '<img class="img-fluid img-responsive rounded shadow rounded" src="https://i.imgur.com/pvUvG4W.png" style="max-width:120px;" loading="lazy">'+
                            '</div>'+
                            '<div class="col-md-6 bg-lightwarning">'+
                                '<p class="h5 pl-1 pt-2 text-center text-dark fw-bold">'+data.title+'</p>'+
                                '<div class="container ml-1 py-2">'+
                                    '<div class="row d-flex flex-row">'+
                                        '<div class="text-muted pt-0 m-0" style="font-size: 0.8rem; line-height: 1.2;">'+
                                            '<p class="mb-0"><i class="fas fa-caret-right"></i>'+
                                            '<small> Kategori : '+data.newscat_name+'</small></p>'+
                                            '<p><i class="fas fa-caret-right"></i>'+
                                            '<small> Tanggal Rilis : '+data.rl_date+'</small></p>'+
                                        '</div>'+
                                    '</div>'+
                                '</div>'+
                            '</div>'+
                            '<div class="bg-white align-items-center col-md-3 py-2 shadow-sm" >'+
                                '<div class="d-flex flex-column">'+
                                    '<button class="btn btn-white border-warning detailberita btn-sm rounded-pill shadow-none mb-2" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal">Detail</button>'+
                                '</div>'+
                            '</div>'+
                        '</div>'
                        ;
                       });
                    $(".row_berita").html(_html);
                }
            });
        }
    });

    //LOAD MORE BERITA
    $("#load_berita").on('click',function(){
        $(".ajaxProgess").show();
        var _currentResult=$(".post-box-berita").length;
        $.ajax({
            url:"{% url 'load_more_berita' %}",
            type:'post',
            data:{
                'offset':_currentResult,
                'csrfmiddlewaretoken':"{{csrf_token}}"
            },
            dataType:'json',
            beforeSend:function(){
                $("#load_berita").addClass('disabled').text('Loading..');
            },
            success:function(res){
                $(".ajaxProgess").hide();
                var _html='';
                var json_data=res.posts;
                console.log(json_data);
                var indd = $(".post-box-berita").length;
                $.each(json_data,function(index,data){
                    _html+=
                        '<div class="row mb-2 border border-secondary post-box-berita" id="'+data.news_id+'" >'+
                            '<div class="bg-lightwarning col-md-3 py-3 d-flex justify-content-center">'+
                                '<img class="img-fluid img-responsive rounded shadow rounded" src="https://i.imgur.com/pvUvG4W.png" style="max-width:120px;" loading="lazy">'+
                            '</div>'+
                            '<div class="col-md-6 bg-lightwarning">'+
                                '<p class="h5 pl-1 pt-2 text-center text-dark fw-bold">'+data.title+'</p>'+
                                '<div class="container ml-1 py-2">'+
                                    '<div class="row d-flex flex-row">'+
                                        '<div class="text-muted pt-0 m-0" style="font-size: 0.8rem; line-height: 1.2;">'+
                                            '<p class="mb-0"><i class="fas fa-caret-right"></i>'+
                                            '<small> Kategori : '+data.newscat_name+'</small></p>'+
                                            '<p><i class="fas fa-caret-right"></i>'+
                                            '<small> Tanggal Rilis : '+data.rl_date+'</small></p>'+
                                        '</div>'+
                                    '</div>'+
                                '</div>'+
                            '</div>'+
                            '<div class="bg-white align-items-center col-md-3 py-2 shadow-sm" >'+
                                '<div class="d-flex flex-column">'+
                                    '<button class="btn btn-white border-warning detailberita btn-sm rounded-pill shadow-none mb-2" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal">Detail</button>'+
                                '</div>'+
                            '</div>'+
                        '</div>'
                        ;
                   });
                $(".row_berita").append(_html);
                var _countTotal=$(".post-box-berita").length;
                
                if(_countTotal==res.totalResult){
                    $("#load_berita").remove();
                }else{
                    $("#load_berita").removeClass('disabled').text('Muat lebih banyak..');
                }
            }
        });
    });

    //DETAIL BERITA
    $('body').on('click', 'button.detailberita', function (){
        $(".ajaxProgess").show();
        $("#exampleModalLabel").text("memuat....");
        $("#exampleModalContent").text("memuat....");
        $("#modalimage").attr("src","");
        var _currentResult=$(this).parent().parent().parent().attr('id');
        $.ajax({
            url:"{% url 'detail_berita' %}",
            type:'post',
            data:{
                'csrfmiddlewaretoken':"{{csrf_token}}", 
                'offset':_currentResult,
            },
            dataType:'json',
            success:function(res){
                var _html='';
                var json_data=res.posts;
                var tes=""
                if (json_data.news == ""){
                    tes = "detil berita tidak tersedia";
                }else{
                    tes = json_data.news;
                }
                var txt = document.createElement("textarea");
                txt.innerHTML = tes;
                var output = txt.value;
                $("#modalimage").removeClass("w-25");
                $("#modalimage").removeClass("w-50");
                $("#modalimage").removeClass("w-100");
                $("#modalimage").addClass("w-25");
                
                $("#exampleModalLabel").text(json_data.title);
                $("#exampleModalContent").html(output);

                $("#modalimage").attr("src","https://i.imgur.com/pvUvG4W.png");
                $("#exampleModalButton").hide();
                $(".ajaxProgess").hide();
            }
        });
    });

    //CARI BERITA
    $('body').on('click', 'button.cari_berita', function (){
        $(".ajaxProgess").show();
        var _currentResult=$('.input_search_berita').val();
        $.ajax({
            url:"{% url 'cari_berita' %}",
            type:'post',
            data:{
                'csrfmiddlewaretoken':"{{csrf_token}}", 
                'offset':_currentResult,
            },
            dataType:'json',
            success:function(res){
                $(".ajaxProgess").hide();
                var _html='<p class="py-2 text-white text-center fw-bold">--- Menemukan '+res.posts.length+' Berita ---</p>';
                var json_data=res.posts;
                if(_currentResult.length > 1){
                    if(json_data.length > 0){
                        $.each(json_data,function(index,data){
                            _html+=
                            '<div class="row mb-2 border border-secondary post-box-berita" id="'+data.news_id+'" >'+
                            '<div class="bg-lightwarning col-md-3 py-3 d-flex justify-content-center">'+
                                '<img class="img-fluid img-responsive rounded shadow rounded" src="https://i.imgur.com/pvUvG4W.png" style="max-width:120px;" loading="lazy">'+
                            '</div>'+
                            '<div class="col-md-6 bg-lightwarning">'+
                                '<p class="h5 pl-1 pt-2 text-center text-dark fw-bold">'+data.title+'</p>'+
                                '<div class="container ml-1 py-2">'+
                                    '<div class="row d-flex flex-row">'+
                                        '<div class="text-muted pt-0 m-0" style="font-size: 0.8rem; line-height: 1.2;">'+
                                            '<p class="mb-0"><i class="fas fa-caret-right"></i>'+
                                            '<small> Kategori : '+data.newscat_name+'</small></p>'+
                                            '<p><i class="fas fa-caret-right"></i>'+
                                            '<small> Tanggal Rilis : '+data.rl_date+'</small></p>'+
                                        '</div>'+
                                    '</div>'+
                                '</div>'+
                            '</div>'+
                            '<div class="bg-white align-items-center col-md-3 py-2 shadow-sm" >'+
                                '<div class="d-flex flex-column">'+
                                    '<button class="btn btn-white border-warning detailberita btn-sm rounded-pill shadow-none mb-2" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal">Detail</button>'+
                                '</div>'+
                            '</div>'+
                        '</div>'
                            ;
                           });
                        _html += '<div class="row d-flex justify-content-center"><button class="btn btn-warning text-dark w-50 fw-bold" type="submit" id="back_to_init_berita">Kembali ke hasil awal</button></div>' 
                        $(".row_berita").html(_html);
                        $("#load_berita").hide();

                    }else if(json_data.length == 0){
                        _html = '<p class="text-white text-center">Berita dengan kata kunci "'+_currentResult+'" tidak ditemukan</p>'+
                        '<div class="row d-flex justify-content-center"><button class="btn btn-warning text-dark w-50 fw-bold" type="submit" id="back_to_init_berita">Kembali ke hasil awal</button></div>'   
                        $(".row_berita").html(_html);

                        $("#load_berita").hide();

                    }
                }
                $("#back_to_init_berita").on('click',function(){
                    $(".row_berita").html('</br>>');
                    $("#pills-berita-tab").click();

                });
                    
                
            }
        });
    });

////DATA////
    //INIT
    $("#pills-data-tab").on('click',function(){
        $('#header').text('Data Statistik');
        if($("#subject_0").length<1){
            $(".ajaxProgess").show();
            $(".container-data").hide();
            $(window).scrollTop(0);
            var sosial;
            var ekonomi;
            var pertanian;
            $.ajax({
                url:"{% url 'load_init_data' %}",
                type:'post',
                data:{
                    'csrfmiddlewaretoken':"{{csrf_token}}"
                },
                dataType:'json',
                success:function(res){
                    $(".ajaxProgess").hide();
                    $(".container-data").show();
                    sosial=res.sosial;
                    ekonomi=res.ekonomi;
                    pertanian=res.pertanian;
                    var _html1='<div class="collapse border border-primary" id="subject_0">';
                    var _html2='<div class="collapse border border-warning" id="subject_1">';
                    var _html3='<div class="collapse border border-success" id="subject_2">';
                    for (var i = 0; i < sosial.length; i++) {
                        _html1+=
                        
                            '<a type="button" class="text-start btn btn-sm btn-no-rounded bg-white bps-blue mb-0 mt-0 mx-0 p-1 w-100 shadow-none subcat subcat_'+sosial[i].sub_id+'" data-bs-toggle="collapse" data-bs-target="#subcat_'+sosial[i].sub_id+'"><i class="fas fa-chevron-circle-right"></i>'+sosial[i].title+'</a>';
                        
                    };
                    for (var i = 0; i < ekonomi.length; i++) {
                        _html2+=
                        
                            '<button type="button" class="text-start btn-sm btn btn-no-rounded bg-white bps-orange mb-0 mt-0 mx-0 p-1 w-100 shadow-none subcat subcat_'+ekonomi[i].sub_id+'" data-bs-toggle="collapse" data-bs-target="#subcat_'+ekonomi[i].sub_id+'"><i class="fas fa-chevron-circle-right"></i>'+ekonomi[i].title+'</button>';
                        
                    };
                    for (var i = 0; i < pertanian.length; i++) {
                        _html3+=
                        
                            '<button type="button" class="text-start btn btn-sm btn-no-rounded bg-white bps-green mb-0 mt-0 mx-0 p-1 w-100 shadow-none subcat subcat_'+pertanian[i].sub_id+'" data--bs-toggle="collapse" data-bs-target="#subcat_'+pertanian[i].sub_id+'"><i class="fas fa-chevron-circle-right"></i>'+pertanian[i].title+'</button>';
                    };

                    _html1+='</div>';
                    _html2+='</div>';
                    _html3+='</div>';

                    $(".subject_0").after(_html1);
                    $(".subject_1").after(_html2);
                    $(".subject_2").after(_html3);

                }
            });
        }
    });
    //ADD MORE DATA
    $('body').on('click', '.subcat', function (){
        
        var clickedcategory=($(this).attr('data-bs-target'));
        var isclicked = $('#' + clickedcategory.replace("#","")).length;
        if (isclicked === 0){
            
            $(".ajaxProgess").show();
            $.ajax({
                url:"{% url 'load_more_data' %}",
                type:'post',
                data:{
                    'offset':clickedcategory,
                    'csrfmiddlewaretoken':"{{csrf_token}}"
                },
                dataType:'json',
                beforeSend:function(){
                    // $("#load_brs").addClass('disabled').text('Loading..');
                },
                success:function(res){
                    $(".ajaxProgess").hide();
                    var _html='<div class="collapse bg-white show mb-1 pb-2 border-bottom border-light" id="'+clickedcategory.replace("#","")+'">';
                    var json_data=res.posts;
                    if(json_data.length>=1){
                        for (var i = 0; i < json_data.length; i++) {
                            _html+='<button class="btn btn-sm btn-white detaildata btn-sm rounded-pill shadow-none mb-1 mt-0 mx-0 py-0 pl-3 pr-2 w-100 text-justify text-start" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" table_id="'+json_data[i].table_id+'"><small><i class="fas fa-caret-right"></i>&nbsp'+json_data[i].title+'</small></button>'
                            
                        };
                        _html+='</div>'
                    } else{
                        _html+='<p>Data tidak ditemukan</p>';
                        _html+='</div>'
                    }
                    
                    var clickedsubcat = "."+clickedcategory.replace("#","");
                    $(clickedsubcat).after(_html);


                }
            });
        }
        
    });

    // DETAIL DATA
    $('body').on('click', 'button.detaildata', function (){
        $(".ajaxProgess").show();
        $("#exampleModalLabel").text("memuat....");
        $("#exampleModalContent").text("memuat....");
        $("#modalimage").attr("src","");
        var _currentResult=$(this).attr('table_id');

        $.ajax({
            url:"{% url 'detail_data' %}",
            type:'post',
            data:{
                'csrfmiddlewaretoken':"{{csrf_token}}", 
                'offset':_currentResult,
            },
            dataType:'json',
            success:function(res){
                var _html='';
                var json_data=res.posts;
                var tes=""
                if (json_data.table == ""){
                    tes = "detil data tidak tersedia";
                }else{
                    tes = json_data.table;
                }
                var txt = document.createElement("textarea");
                txt.innerHTML = tes;
                var output = txt.value;
                $("#modalimage").removeClass("w-25");
                $("#modalimage").removeClass("w-50");
                $("#modalimage").removeClass("w-100");

                $("#exampleModalLabel").text(json_data.title);
                $("#modalimage").attr("src","");    
                $("#exampleModalContent").html(output);
                $("#exampleModalButton").show();
                $("#exampleModalButton").attr("href", json_data.excel)
                $(".ajaxProgess").hide();
            }
        });
    });




////DETAIL TENTANG 
    $('body').on('click', 'a.tentangbutton', function (){
        $("#modalimage").removeClass("w-25");
        $("#modalimage").removeClass("w-50");
        $("#modalimage").removeClass("w-100");
        $("#modalimage").addClass("w-50");
        $("#exampleModalLabel").text("Tentang Aplikasi SateBlora ");
        $("#exampleModalContent").html('<p class="mt-2">Aplikasi SateBlora (Satu Datane Blora) ini merupakan aplikasi karya BPS Kabupaten Blora berbasis Web dan Android. Konten utama pada aplikasi ini bersumber dari hasil diseminasi dan data dari website BPS Kabupaten Blora. Pengembangan aplikasi ini akan terus dilakukan.</p>'+
          '<p>Kami mengharapkan kritik, saran, serta kolaborasi yang dapat disampaikan melalui email bps3316@bps.go.id.</p>'+
           '<p class="mb-0">Tim Pengembang Aplikasi SateBlora</br>'+
           'BPS Kabupaten Blora</p>');
        $("#modalimage").attr("src","https://imgur.com/5nuiHfu.png");
        $("#exampleModalButton").hide();

    });
});
</script>
</body>
</html>
